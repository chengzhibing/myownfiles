### TCP/IP协议
* 1.OSI七层协议模型：
第7层：应用层：为操作系统或者网络上的应用程序提供访问网络服务的接口，协议http,https,SMTP,POP3，ftp
第6层：表示层:压缩以及格式转换
第5层：会话层：负责数据传输中维持网络设备之间的通信连接
第4层：传输层：把传输表头加到数据上，形成数据包。完成端到端的数据传输，协议：TCP,UDP
第3层：网络层：IP协议，复责对子网间的数据包进行寻址和路由选择，可以实现拥塞控制，网际互连等功能。（路由器）
第2层：数据链路层：物理地址寻址。（交换机）
第1层：物理层：在局域网上进行数据传输，负责电脑通讯设备之间的互通。
### 协议：规定和约束。
#### TCP和IP协议具体指的是什么
* 1.多数指的是互联网通信所需要的协议，是一个协议家族，以TCP,IP为核心。
#### TCP/IP参考模型：
一共有四层：应用层（应用层，表示层，会话层），传输层，网络层，链路层（数据链路层，物理层）。
#### 数据包：
网络层以上的包的单位。
每个分层都会对发送的数据添加一个首部，首部包含了盖层协议相关的信息而真正要发送的内容称之为数据
首部 + 数据 = 数据包。
对于下层来说：上层发过来的所有的内容，都会被当做本层的数据。
传输层：TCP包：（TCP包首部 + 数据）
网络层：IP 包 IP包首部 + （TCP包首部 + 数据）
数据链路层：以太网包：以太网首部 + （IP包首部 + （TCP包首部 + 数据））
#### 每层除了添加首部还做什么？
用户1                                                        用户2
hello                                                       hello
|                                                             |
|                                                             |
传输层                                                       传输层
|
|                                                             |
网络层                                                         |
|                                                            网络层
|                                                              |
数据链路层                                                      |
|                                                            数据链路层
\|/                                                            /|\
________________________________________________________________|

用户1
* 1.传输层：通过添加TCP首部，保证数据的可靠传输。
* 2.网络层：参考路由控制表来决定接受此IP包的路径和主机。
* 3.数据链路层：将生成的包通过物理层传输给接受端。
用户2：
* 1.数据链路层：接受到数据后，通过mac地址来判断是不是发给自己的。
* 2.网络层：从首部那里来判断此IP是否和自己的IP匹配。
* 3.传输层：检查端口号
总结地址：
数据链路层mac地址：识别同一链路中不同的计算机
网络层IP地址：用来识别TCP，ip网络中互联的主机和路由器。
传输层的端口号：应用程序地址，识别同一计算机中进行通信的不同应用程序。
#### 通过以上三个地址就可以识别一次通信了吗？为什么不行呢？
IP包的首部：源ip地址 + 目标地址 + 协议号。
TCP包的首部：源端口号 + 目标端口号。
TCP和UDP的区别：
UDP是无连接的，TCP必须是三次握手才能建立连接。
UDP是面向报文的，没有拥塞控制，所以速度快，适合多媒体通信要求（实时聊天，一对一，一对多，多对一，多对多）
TCP:只能是一对一的可靠传输。
rtmp和hls直播基于TCP，希望提供稳定可靠的直播环境。
#### TCP通过什么提供可靠性的环境的？
* 超时重发，发出的报文如果没有收到及时的确认，会重发。
* 数据包的校验。
* 对失序的数据重新排序。
* 进行流量控制，防止缓存区的溢出。
* 快重传和快恢复
* TCP会将数据截断为合理的长度。
#### TCP是如何进行拥塞控制的？
拥塞控制：防止过多的数据注入网络中，造成路由器或者链路过载。
拥塞控制就是防⽌过多的数据注⼊⽹络中，这样可以使⽹络中的路由器或链路不致过载。
发送⽅维持⼀个叫做拥塞窗⼝cwnd（congestion window）的状态变量。
为了防⽌cwnd增⻓过⼤引起⽹络拥塞，还需设置⼀个慢开始⻔限ssthresh状态变量。ssthresh
的⽤法如下：
当cwnd < ssthresh时，使⽤慢开始算法。也就是乘法算法
当cwnd>ssthresh时，改⽤拥塞避免算法。也就是加法算法
当cwnd=ssthresh时，慢开始与拥塞避免算法任意。
当出现拥塞的时候就把⼼的⻔限值设为此时窗⼝⼤⼩的⼀般，窗⼝⼤⼩设置为1，再重新执⾏
上⾯的步骤。
当收到连续三个重传的时候这就需要快重传和快恢复了，当收到连续三个重传 这个时候发送
⽅就要重传⾃⼰的信息，然后⻔限减半但是这个时候并不是⽹络阻塞，窗⼝只会减半执⾏拥塞
避免算法。
#### TCP的三次握手
#### IP地址：32位的地址 每八位为一组，分为四组，转换成十进制显示。
* 1.192.168.1.10
** 192.168.1网络标识：一个网段内的网络标识必须相同。
** 10，主机标识，同一网段内的主机标识不能重复
#### DNS（域名服务系统）
www.baidu.com访问此地址的步骤：
* 1.客户端：查询www.baidun.com => DNS服务器（首先检查缓存，如果存在记录就直接返回），不存在的话，执行第二步：
* 2.DNS服务器 => 向根域名服务器发送www.baidu.com(返回顶级域名.com的服务器地址)
* 3.DNS服务器 => .com顶级域名服务器发送www.baidu.com(返回.baidu.com的权威域名服务器地址)
* 4.DNS服务器 => 向权威域名服务器发送www.baidu.com(返回www.baidu.com记录)，发送到客户端。
#### 如何通过nodejs创建一个TCP服务
Socket，套接字 ==>应用层和传输层之间的抽象层 ===> 把TCP/IP复杂的操作抽象为几个简单的接口，供应用层调用。
用来实现进程在网络之间的通信：create，listen，connect,read,write
http：应用层的模块。主要是按照特定协议进行编解码数据。
net:传输层的模块，主要负责传输编码后的应用层的数据。
https： 包含http,crypto,为了数据的安全性
#### 如何通过NODEJS创建一个UDP服务。
#### HTTP
* 1.http建立在tcp之上。
* 2.一次完整的HTTP创建是什么样的。
** 建立TCP连接，先建立TCP连接，才能建立http连接。
** 客户端向服务器端发送请求命令。
GET/INFO  HTTP/1.1
** 客户端发送请求头信息。
request,headers,结束后会发送一个空白行给服务器端。
** 服务器应答：
HTTP/1.1 200 OK
协议的版本号和响应的状态码。
** 服务端返回响应头信息。
response, headers
** 服务端向客户端发送数据
Content-Type
** 服务器关闭TCP连接
如果客户端Connect:keep-alive则要求不关闭连接
#### http协议有哪些特点？
* 1.通过请求和响应的交换达成通讯
* 2.无状态
* 3.通过cookie来做状态管理。
* 4.通过URL定位资源
URI:统一资源标识符：如身份证号
URL：统一资源定位符：如家庭地址
URI是一个抽象类，他规定实体类要实现找到资源的功能
URL extends URI
* 5.通过各种方法来表示自己的意图
get post put delete
* 6.持久连接只要任意端没有明确提出断开连接，则连接会一直保持。
http 1.1所有的请求是默认持久连接
* 7.管道机制
在同一个tcp连接里，客户端可以同时发送多个请求。但是服务器端还是按照先后顺序响应请求
在HTTP1.1中管道机制是关闭的
队头阻塞： 如果一个TCP连接里的第一个http请求非常慢。
chrome最大支持六个同域名请求：最大支持开启6个TCP连接
### http1.0, 1.1, 2.0的区别
1.0 ：每个TCP连接只能发送一个请求，当服务器响应完之后就会关闭这个连接。
1.1： 默认采用持久连接，keep-alive增加了管道机制
2.0增加了双工模式，不仅客户端可以同时发送多个请求，服务器端也可以同时响应多个解决了队头阻塞问题。





